#ifndef _TOKENIZER_HPP_
#define _TOKENIZER_HPP_

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#include "global/global_include.hpp"

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

enum class Bracket : char
{
    undef_bracket = 0  ,
    left_bracket  = '[',
    right_bracket = ']',
};

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

enum class Separator : char
{
    undef_separator = 0  ,
    comma           = ',',
    colon           = ':',
};

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

enum class MathOperator : char
{
    undef_operator = 0  ,
    plus           = '+',
};

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct Number
{
    const char* number;
    size_t      number_len;  
};

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct TokenizerLabel
{
    const char* name;
    size_t      name_len;
};

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

enum class TokenType
{
    undef_token_type = 0,
    token_command       ,
    token_register      ,
    token_number        ,
    token_label         ,
    token_bracket       ,
    token_separator     ,
    token_math_operation,
};

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

union TokenValue
{
    Cmd            command  ;
    Registers      reg      ;
    Number         number   ;
    TokenizerLabel label    ;
    Bracket        bracket  ;
    Separator      seprator ;
    MathOperator   operation;
};

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct TokenCodePlace
{
    size_t line;
    size_t pos_in_line;
};

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct Token
{
    TokenType      type;
    TokenValue     value;
    TokenCodePlace place;
};

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct TokensArray
{
    Token* array;
    size_t size;
    size_t pointer;
};

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

TokensArray GetTokensArray (const char * asm_file    );
void        TokensArrayDtor(TokensArray* tokens_array);

#ifdef _DEBUG
void        TokensLog      (const TokensArray* tokens_array, const char* asm_file);
#endif // _DEBUG

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


#endif // _TOKENIZER_HPP_
