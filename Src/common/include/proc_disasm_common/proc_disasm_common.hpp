#ifndef PROC_DISASM_COMMON_HPP
#define PROC_DISASM_COMMON_HPP

//--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#include <stddef.h>

//--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct CodeArray
{
    int*   array;
    size_t size ;
    size_t ip   ; // instruction pointer
};

//--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

using one_bit_t = unsigned char;

//--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct PushType
{
    one_bit_t number   : 1;
    one_bit_t reg      : 1;
    one_bit_t memory   : 1;
    one_bit_t aligment : 1;
};

//--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct PopType
{
    one_bit_t reg      : 1;
    one_bit_t memory   : 1;
    one_bit_t aligment : 1;
};

//--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

one_bit_t  GetIBitOfInt             (int n, size_t i);

// HandlePush helper functions
PushType   GetPushType              (int push_type_int);
bool       IsPushTypeNumber         (PushType push_type);
bool       IsPushTypeRegister       (PushType push_type);
bool       IsPushTypeMemory         (PushType push_type);
bool       IsPushTypeMemoryRegister (PushType push_type);
bool       IsPushTypeAligment       (PushType push_type);

// HandlePop helper functions
PopType    GetPopType               (int pop_type_int);
bool       IsPopTypeRegister        (PopType pop_type);
bool       IsPopTypeMemory          (PopType pop_type);
bool       IsPopTypeMemoryRegister  (PopType pop_type);
bool       IsPopTypeAligment        (PopType pop_type);

#endif // PROC_DISASM_COMMON_HPP
