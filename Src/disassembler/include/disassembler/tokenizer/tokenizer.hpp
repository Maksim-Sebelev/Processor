#ifndef DISASM_TOKENIZER_HPP
#define DISASM_TOKENIZER_HPP

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#include "stddef.h"
#include "global/global_include.hpp"

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

using Number = int;

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

enum class TokenType
{
    token_command_t    ,
    token_register_t   ,
    token_number_t     ,
    token_jump_label_t ,
    token_func_label_t ,
    token_separator_t  , 
};

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct TokenJumpLabel // for jumps
{
    const char* name        ;
    size_t      code_pointer;
};

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct TokenFuncLabel // for calls
{
    const char* name        ;
    size_t      code_pointer;
};

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

enum class Separator : char
{
    undef_separator = '\0',

    comma     = ',',
    semicolon = ':',
};
//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

union TokenValue
{
    Cmd            command   ;
    Registers      reg       ;
    Number         nuber     ;
    TokenJumpLabel jump_label;
    TokenFuncLabel func_label;
};

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct Token
{
    TokenType  type        ;
    TokenValue value       ;
    size_t     code_pointer;
};

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct TokensArray
{
    Token* array;
    size_t size;
};

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

TokensArray GetTokensArray(const char* bin_file);

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#endif // DISASM_TOKENIZER_HPP