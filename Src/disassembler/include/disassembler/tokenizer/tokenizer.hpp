#ifndef DISASM_TOKENIZER_HPP
#define DISASM_TOKENIZER_HPP

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#include "stddef.h"
#include "global/global_include.hpp"
#include "list/list.hpp"

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

using Number = int;

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

enum class TokenType
{
    token_command_t  ,
    token_register_t ,
    token_number_t   ,
    token_label_t    ,
    token_separator_t,
    token_bracket_t  ,
};

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct TokenLabel
{
    const char* name        ;
    size_t      code_pointer;
    bool        is_function ;
};

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

enum class Separator : char
{
    undef_separator = '\0',

    comma     = ',',
    semicolon = ':',
};

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

enum class Bracket : char
{
    undef_bracket = '\0',

    left_bracket  = '[',
    right_bracket = ']',
};

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

union TokenValue
{
    Cmd            command  ;
    Registers      reg      ;
    Number         number   ;
    TokenLabel     label    ;
    Separator      separator;
    Bracket        bracket  ;
};

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct Token
{
    TokenType  type        ;
    TokenValue value       ;
    size_t     code_pointer;
};

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

using TokensList = List_t;

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

TokensList GetTokensArray(const char* bin_file);

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#endif // DISASM_TOKENIZER_HPP